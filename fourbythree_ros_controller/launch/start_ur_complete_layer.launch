<launch>
  <arg name="simulation"          default="false" /> 
  <arg name="robot_configuration" default="UR10"/>
  <arg name="robot_ip"            default="192.168.254.31" />
  <arg name="hrc"                 default="false" />
  <arg name="hrc_configuration"   default="fbt1" />
  <!--<arg name="xacro_file"          default="$(find ur_description)/urdf/ur10_robot.urdf.xacro" />-->
  <!--arg name="xacro_file"          default="/home/ada/fbt_20171110/config/robot/ur10_gopro/robot_and_environment.urdf.xacro" /-->
  <arg name="force_monitor"       default="false" /> 
  
  <!--group if="$(arg hrc)" >
    <include file="$(find itia_hrc_app)/launch/$(arg hrc_configuration)/$(arg hrc_configuration)_autogenerated_environment_parameters.launch.xml" />
    <include file="$(find itia_hrc_app)/launch/trajs_loader_autogenerated.launch" />
  </group-->
    
  <group unless="$(arg simulation)">
    <include file="$(find fourbythree_ros_controller)/launch/ur10_ros_control.launch" >
        <arg name="robot_ip" value="$(arg robot_ip)"/>
    </include>  
  </group>
  <!--group if="$(arg simulation)">
    <param name="robot_description" command="$(find xacro)/xacro --inorder '$(arg xacro_file)'" />
  </group-->  
  
  <include file="$(find fourbythree_ros_controller)/launch/start_ur_controller.launch">
    <arg name="simulation" default="$(arg simulation)"/>
    <arg if="$(arg simulation)"       name="configuration" default="$(arg robot_configuration)_simulation"/>
    <arg unless="$(arg simulation)"   name="configuration" default="$(arg robot_configuration)"/>
    <arg name="nodelet_manager_name"  value="fourbythree_nodelet"/>
    <arg name="force_monitor"         value="$(arg force_monitor)" />
  </include>  
  
  <include file="$(find fourbythree_ros_controller)/launch/fourbythree_nodelet_manager.launch">
   <remap from="external_wrench" to="wrench"/>
  </include>  
  
  <rosparam command="load" file="$(find fourbythree_ros_controller)/config/force_torque_limit.yaml" />
  
  <node name="tekniker_itia_wrapper_node" pkg="fourbythree_ros_controller" type="tekniker_itia_wrapper_node" output="screen" />

</launch>
